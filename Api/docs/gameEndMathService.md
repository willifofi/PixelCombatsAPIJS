# ðŸŽ® Game API â€” Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ðµ ÐœÐ°Ñ‚Ñ‡Ð°

Ð­Ñ‚Ð¾Ñ‚ Ñ€Ð°Ð·Ð´ÐµÐ» Ð¾Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÑ‚ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ° `Game` Ð¸Ð· `pixel_combats/room`, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð¿Ð¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸ÐµÐ¼ Ð¸Ð³Ñ€Ñ‹, Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼ Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¾Ð¹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ Ð¼Ð°Ñ‚Ñ‡Ð°.

## Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚

```ts
import { Game, Ui } from "pixel_combats/room";
```

> Ð­Ñ‚Ð¾Ñ‚ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð¿Ñ€ÐµÐ´Ð¾ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿ Ðº ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸ÑŽ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸ÐµÐ¼ Ð¸Ð³Ñ€Ñ‹: Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸ÑŽ, Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÑƒ Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ Ð¿Ð¾Ð±ÐµÐ´Ñ‹.

---

## Ð¡Ð²Ð¾Ð¹ÑÑ‚Ð²Ð°

### `Game.IsGameOver`

- **ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ**: Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÑ‚ `true`, ÐµÑÐ»Ð¸ Ð¸Ð³Ñ€Ð° ÑƒÐ¶Ðµ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°.
- **Ð¢Ð¸Ð¿**: `boolean`
- **ÐŸÑ€Ð¸Ð¼ÐµÑ€**:
```ts
if (Game.IsGameOver) Ui.GetContext().Hint.Value = "Ð˜Ð³Ñ€Ð° ÑƒÐ¶Ðµ Ð¾ÐºÐ¾Ð½Ñ‡ÐµÐ½Ð°";
```

---

## ÐœÐµÑ‚Ð¾Ð´Ñ‹

### `Game.RestartGame()`

- **ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ**: ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ñ‚ÐµÐºÑƒÑ‰ÑƒÑŽ Ð¸Ð³Ñ€Ñƒ Ð² ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ðµ.
- **ÐŸÑ€Ð¸Ð¼ÐµÑ€**:
```ts
Game.RestartGame();
```

---

### `Game.GameOver(winner)`

- **ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ**: Ð—Ð°Ð²ÐµÑ€ÑˆÐ°ÐµÑ‚ Ð¸Ð³Ñ€Ñƒ. ÐœÐ¾Ð¶ÐµÑ‚ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ Ð¸Ð»Ð¸ Ð¸Ð³Ñ€Ð¾ÐºÐ° Ð² ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»Ñ, Ð»Ð¸Ð±Ð¾ Ð¿ÐµÑ€ÐµÐ´Ð°Ð²Ð°Ñ‚ÑŒ Ð»Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´.

#### ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹:

#### ÐŸÐ¾Ð±ÐµÐ´Ð° Ð¾Ð´Ð½Ð¾Ð¹ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
```ts
Game.GameOver(Teams.Get("teamId"));
```

#### ÐŸÐ¾Ð±ÐµÐ´Ð° Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¸Ð³Ñ€Ð¾ÐºÐ°
```ts
Game.GameOver(Players.Get("playerId"));
```

#### ÐÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»ÐµÐ¹ (Ð½Ð¸Ñ‡ÑŒÑ)
```ts
const winners = [Teams.Get("team1"), Teams.Get("team2")];
Game.GameOver(winners);
```

#### Ð›Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´ ÐºÐ¾Ð¼Ð°Ð½Ð´
```ts
const leaderBoard = [
  Teams.Get("team1"),
  Teams.Get("team2"),
  Teams.Get("team3")
];
Game.GameOver(leaderBoard);
```

#### Ð›Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´ Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð²
```ts
const playerLeaderBoard = [
  Players.Get("player1"),
  Players.Get("player2"),
  Players.Get("player3")
];
Game.GameOver(playerLeaderBoard);
```

---

## Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ñ

### `Game.OnGameOver.Add(() => {})`

- **ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ**: Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ñ€Ð¸ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ð¸ Ð¸Ð³Ñ€Ñ‹, Ð´Ð¾ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ñ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»ÐµÐ¹.
- **ÐŸÑ€Ð¸Ð¼ÐµÑ€**:
```ts
Game.OnGameOver.Add(() => {
  Ui.GetContext().Hint.Value = "Ð˜Ð³Ñ€Ð° Ð¾ÐºÐ¾Ð½Ñ‡ÐµÐ½Ð°";
});
```

---

### `Game.OnTeamsWin.Add((teams) => {})`

- **ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ**: Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ, ÐºÐ¾Ð³Ð´Ð° Ð¸Ð³Ñ€Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð° Ð¸ ÐµÑÑ‚ÑŒ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»Ð¸ ÑÑ€ÐµÐ´Ð¸ ÐºÐ¾Ð¼Ð°Ð½Ð´.
- **ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€**: Ð¼Ð°ÑÑÐ¸Ð² ÐºÐ¾Ð¼Ð°Ð½Ð´ (`Team[]`)
- **ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ**: Ð•ÑÐ»Ð¸ Ð² Ð¼Ð°ÑÑÐ¸Ð²Ðµ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÐºÐ¾Ð¼Ð°Ð½Ð´ â€” ÑÑ‚Ð¾ Ð½Ð¸Ñ‡ÑŒÑ.
- **ÐŸÑ€Ð¸Ð¼ÐµÑ€**:
```ts
Game.OnTeamsWin.Add((winners) => {
  winners.forEach(team => {
    Ui.GetContext(team).Hint.Value = `ÐšÐ¾Ð¼Ð°Ð½Ð´Ð° ${team.Id} Ð²Ñ‹Ð¸Ð³Ñ€Ð°Ð»Ð°!`;
  });
});
```

---

### `Game.OnPlayersWin.Add((players) => {})`

- **ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ**: Ð’Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ, ÐºÐ¾Ð³Ð´Ð° Ð¸Ð³Ñ€Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð° Ð¸ ÐµÑÑ‚ÑŒ Ð¿Ð¾Ð±ÐµÐ´Ð¸Ñ‚ÐµÐ»Ð¸ ÑÑ€ÐµÐ´Ð¸ Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð².
- **ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€**: Ð¼Ð°ÑÑÐ¸Ð² Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð² (`Player[]`)
- **ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ**: Ð•ÑÐ»Ð¸ Ð² Ð¼Ð°ÑÑÐ¸Ð²Ðµ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¸Ð³Ñ€Ð¾ÐºÐ¾Ð² â€” ÑÑ‚Ð¾ Ð½Ð¸Ñ‡ÑŒÑ.
- **ÐŸÑ€Ð¸Ð¼ÐµÑ€**:
```ts
Game.OnPlayersWin.Add((winners) => {
  winners.forEach(player => {
    Ui.GetContext(player).Hint.Value = `Ð˜Ð³Ñ€Ð¾Ðº ${player.Name} Ð²Ñ‹Ð¸Ð³Ñ€Ð°Ð»!`;
  });
});
```

